<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GGLernen Vokabeltrainer</title>
<style>
/* --- Body & Grunddesign --- */
body{
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(to right, #74b9ff, #a29bfe);
  color:#333;
  padding:20px;
  margin:0;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  transition: background 1s;
}
h1,h2{
  color:#fff;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
  margin:0 0 15px 0;
}
section{
  background:rgba(255,255,255,0.05);
  padding:25px;
  margin:15px;
  border-radius:25px;
  width:90%;
  max-width:700px;
  backdrop-filter: blur(15px);
  box-shadow:0 12px 25px rgba(0,0,0,0.25);
  transition: transform 0.4s, box-shadow 0.4s;
}
section:hover{
  transform: translateY(-5px);
  box-shadow:0 20px 40px rgba(0,0,0,0.35);
}
input,button,select{
  padding:12px;
  margin:5px;
  border-radius:15px;
  border:none;
  font-size:1em;
  outline:none;
  transition:0.3s;
}
input:focus{
  transform: scale(1.02);
  box-shadow:0 0 8px rgba(108,92,231,0.6);
}
button{
  background:#6c5ce7;
  color:white;
  cursor:pointer;
  box-shadow:0 8px 18px rgba(0,0,0,0.25);
}
button:hover{
  background:#a29bfe;
  transform: scale(1.05);
  box-shadow:0 12px 25px rgba(0,0,0,0.35);
}

/* --- Karten-Design --- */
.card-container{
  perspective:1200px;
  margin:25px 0;
}
.card{
  width:320px;
  height:180px;
  background:#fff;
  color:#000;
  display:flex;align-items:center;justify-content:center;
  border-radius:20px;
  text-align:center;
  font-size:1.4em;
  cursor:pointer;
  transition:0.7s cubic-bezier(0.68,-0.55,0.265,1.55);
  transform-style:preserve-3d;
  position:relative;
  box-shadow:0 15px 35px rgba(0,0,0,0.3);
}
.card.flipped{transform: rotateY(180deg);}
.card .front,.card .back{
  position:absolute;width:100%;height:100%;
  backface-visibility:hidden;
  display:flex;align-items:center;justify-content:center;
  border-radius:20px;
  transition:0.5s;
}
.card .back{
  transform:rotateY(180deg);
  background:#ffeaa7;
}

/* --- Fortschritt & Level --- */
.progress, .level, .streak{
  margin-top:12px;
  font-size:0.95em;
  color:#fff;
  text-shadow: 1px 1px 5px rgba(0,0,0,0.3);
}

/* --- Vokabelliste --- */
.vocab-item{
  padding:8px 12px;
  border-radius:12px;
  margin:4px 0;
  background: rgba(255,255,255,0.15);
  display:flex;justify-content:space-between;
  transition:0.3s;
}
.vocab-item:hover{
  transform: translateX(5px);
  background: rgba(255,255,255,0.3);
}

/* --- Avatar oben rechts --- */
#avatar {
  position: fixed;
  top: 20px;
  right: 20px;
  width: 55px;
  height: 55px;
  border-radius: 50%;
  background: linear-gradient(135deg,#6c5ce7,#a29bfe);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.6em;
  cursor: pointer;
  box-shadow:0 8px 25px rgba(0,0,0,0.35);
  transition: transform 0.3s, box-shadow 0.3s;
  z-index: 1000;
}
#avatar:hover{
  transform: scale(1.1);
  box-shadow:0 12px 35px rgba(0,0,0,0.5);
}

/* --- Popup --- */
#avatarPopup {
  position: fixed;
  top: 85px;
  right: 20px;
  width: 240px;
  background: rgba(255,255,255,0.98);
  border-radius: 20px;
  padding: 18px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.35);
  display: none;
  z-index: 1000;
  transform: translateY(-10px);
  transition: transform 0.3s, opacity 0.3s;
}
#avatarPopup h3{
  margin-top:0;
  font-size:1.1em;
  color:#333;
}
#avatarPopup div{
  margin:6px 0;
  font-size:0.95em;
  color:#555;
  display:flex;justify-content:space-between;
}
</style>
</head>
<body>

<div id="avatar" onclick="toggleAvatarPopup()">üë¶üèª</div>
<div id="avatarPopup">
  <h3>Benutzerinfo</h3>
  <div><span>Name:</span><span id="popupName"></span></div>
  <div><span>Level:</span><span id="popupLevel"></span></div>
  <div><span>Streak:</span><span id="popupStreak"></span></div>
  <div><span>Fortschritt:</span><span id="popupProgress"></span></div>
</div>

<h1>GGLernen Vokabeltrainer</h1>

<section>
  <h2>Konto</h2>
  <input type="text" id="usernameInput" placeholder="Dein Name">
  <button onclick="saveUsername()">Speichern</button>
</section>

<section>
  <h2>Ordner</h2>
  <input type="text" id="newFolderName" placeholder="Neuen Ordner erstellen">
  <button onclick="createFolder()">Erstellen</button>
  <div id="folderList"></div>
</section>

<section id="trainerSection" style="display:none;">
  <h2 id="folderTitle"></h2>
  <div class="card-container">
    <div class="card" id="card" onclick="flipCard()">
      <div class="front" id="cardFront"></div>
      <div class="back" id="cardBack"></div>
    </div>
  </div>
  <div style="margin-top:10px; display:flex; justify-content:center; gap:20px;">
    <button onclick="answer(true)" style="font-size:1.5em; background:green;">‚úÖ</button>
    <button onclick="answer(false)" style="font-size:1.5em; background:red;">‚ùå</button>
  </div>
  <div>
    <input type="text" id="frontInput" placeholder="Franz√∂sisch">
    <input type="text" id="backInput" placeholder="Deutsch">
    <button onclick="addVocab()">Hinzuf√ºgen</button>
  </div>
  <div id="vocabList"></div>
  <div class="progress" id="progress"></div>
  <div class="level" id="levelDisplay"></div>
  <div class="streak" id="streakDisplay"></div>
</section>

<script>
// --- Account ---
let username = localStorage.getItem('username') || '';
document.getElementById('usernameInput').value=username;
let streak = JSON.parse(localStorage.getItem('streak')) || 0;

function saveUsername(){
  username=document.getElementById('usernameInput').value.trim();
  localStorage.setItem('username',username);
  updateAvatarPopup();
}
function updateAvatarPopup(){
  document.getElementById('popupName').innerText=username || 'Unbekannt';
  let levelText = document.getElementById('levelDisplay').innerText;
  document.getElementById('popupLevel').innerText = levelText ? levelText.replace('Level: ','1') : '1';
  document.getElementById('popupStreak').innerText = `${streak} Tage`;
  let progressText = document.getElementById('progress').innerText;
  document.getElementById('popupProgress').innerText = progressText ? progressText.replace('Fortschritt: ','0%') : '0%';
}
function toggleAvatarPopup(){
  const popup = document.getElementById('avatarPopup');
  if(popup.style.display==='block'){
    popup.style.opacity=0;
    setTimeout(()=>popup.style.display='none',300);
  }else{
    popup.style.display='block';
    setTimeout(()=>popup.style.opacity=1,10);
  }
}

// --- Ordner ---
let folders = JSON.parse(localStorage.getItem('folders')) || {};
let currentFolder='';
let vocabList=[];
let currentIndex=0;
let flipped=false;

function saveFolders(){localStorage.setItem('folders',JSON.stringify(folders));}
function renderFolders(){
  const list = document.getElementById('folderList');
  list.innerHTML='';
  let keys = Object.keys(folders);
  keys.forEach((name,i)=>{
    const div = document.createElement('div');
    div.style.display='flex';
    div.style.alignItems='center';
    div.style.marginBottom='6px';
    
    const btn = document.createElement('button');
    btn.innerText=name;
    btn.onclick=()=>openFolder(name);
    btn.style.flex='1';
    
    const upBtn = document.createElement('button');
    upBtn.innerText='‚¨ÜÔ∏è';
    upBtn.onclick=()=>moveFolder(name,-1);
    
    const downBtn = document.createElement('button');
    downBtn.innerText='‚¨áÔ∏è';
    downBtn.onclick=()=>moveFolder(name,1);
    
    const delBtn = document.createElement('button');
    delBtn.innerText='üóëÔ∏è';
    delBtn.onclick=()=>deleteFolder(name);
    
    div.appendChild(btn);
    div.appendChild(upBtn);
    div.appendChild(downBtn);
    div.appendChild(delBtn);
    list.appendChild(div);
  });
}

function createFolder(){
  let name=document.getElementById('newFolderName').value.trim();
  if(name && !folders[name]){
    folders[name]=[];
    saveFolders();
    renderFolders();
    document.getElementById('newFolderName').value='';
  }
}

function moveFolder(name,direction){
  let keys=Object.keys(folders);
  let idx=keys.indexOf(name