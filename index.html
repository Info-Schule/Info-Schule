<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GGLernen Vokabeltrainer</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
body{
  font-family:'Roboto',sans-serif;
  background: linear-gradient(135deg,#74b9ff,#a29bfe);
  margin:0; padding:0;
  display:flex; flex-direction:column; align-items:center;
  min-height:100vh;
}
header{
  width:100%; display:flex; justify-content:space-between; align-items:center; padding:15px 20px;
  background: rgba(0,0,0,0.2); backdrop-filter: blur(10px); color:white;
  box-shadow:0 5px 15px rgba(0,0,0,0.3);
}
.logo{font-weight:bold;font-size:1.7em;letter-spacing:2px;}
.avatar{
  background:rgba(255,255,255,0.2); padding:10px 15px; border-radius:30px; text-align:center;
  display:flex; flex-direction:column; align-items:center; box-shadow:0 5px 15px rgba(0,0,0,0.2);
}
.avatar strong{font-size:1.1em;}
section{
  background:rgba(255,255,255,0.1); padding:20px; margin:15px; border-radius:25px;
  width:90%; max-width:700px; backdrop-filter: blur(10px); box-shadow:0 8px 25px rgba(0,0,0,0.3);
  transition:0.5s;
}
section:hover{transform:scale(1.02);}
input,button{padding:10px;margin:5px;border-radius:12px;border:none;font-size:1em;outline:none;}
button{background:#6c5ce7;color:white; cursor:pointer; transition:0.3s; box-shadow:0 5px 15px rgba(0,0,0,0.3);}
button:hover{background:#a29bfe; transform:scale(1.05);}
.card-container{perspective:1200px;margin:20px 0; display:flex; justify-content:center;}
.card{
  width:300px; height:180px; background:#fff; color:#000; display:flex; align-items:center; justify-content:center;
  border-radius:15px; text-align:center; font-size:1.3em; cursor:pointer; transition:0.6s; transform-style:preserve-3d; position:relative;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
}
.card.flipped{transform:rotateY(180deg) scale(1.05);}
.card .front,.card .back{position:absolute; width:100%; height:100%; backface-visibility:hidden; display:flex; align-items:center; justify-content:center; border-radius:15px;}
.card .back{transform:rotateY(180deg);background:#ffeaa7;}
.progress,.level,.streak,.quote{margin-top:10px;font-size:0.9em;color:white;text-shadow:1px 1px 3px rgba(0,0,0,0.3);}
.vocab-item{transition:0.3s; display:flex; justify-content:space-between; align-items:center;}
.vocab-item:hover{transform:scale(1.02);}
.delete-btn{background:#e17055;margin-left:5px;}
.tutorial{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);
  display:flex;align-items:center;justify-content:center;flex-direction:column;color:white;font-size:1.2em;z-index:9999;animation:fadeIn 1s;}
.tutorial button{font-size:1em;padding:10px 20px; margin-top:20px; border-radius:12px; background:#6c5ce7; color:white;}
@keyframes fadeIn{from{opacity:0} to{opacity:1}}
</style>
</head>
<body>

<header>
<div class="logo">GGLernen</div>
<div class="avatar">
<span id="avatarName">Gast</span>
<span id="avatarLevel">Level 1</span>
<span id="avatarStreak">Streak 0 Tage</span>
</div>
</header>

<section id="tutorialSection" class="tutorial">
<p>Willkommen bei GGLernen! Lerne effizient mit Vokabelkarten und Fortschritt!</p>
<button onclick="closeTutorial()">Los geht's!</button>
</section>

<section>
<h2>Konto</h2>
<input type="text" id="usernameInput" placeholder="Dein Name">
<button onclick="saveUsername()">Speichern</button>
<div id="accountInfo"></div>
</section>

<section>
<h2>Ordner</h2>
<input type="text" id="newFolderName" placeholder="Neuen Ordner erstellen">
<button onclick="createFolder()">Erstellen</button>
<div id="folderList"></div>
</section>

<section id="trainerSection" style="display:none;">
<h2 id="folderTitle"></h2>
<div class="card-container">
<div class="card" id="card" onclick="flipCard()">
<div class="front" id="cardFront"></div>
<div class="back" id="cardBack"></div>
</div>
</div>
<div>
<input type="text" id="frontInput" placeholder="Fremdsprache">
<input type="text" id="backInput" placeholder="Deutsch">
<button onclick="addVocab()">Hinzufügen</button>
</div>
<div id="vocabList"></div>
<div>
<button onclick="answer(true)">Richtig</button>
<button onclick="answer(false)">Falsch</button>
</div>
<div class="progress" id="progress"></div>
<div class="level" id="levelDisplay"></div>
<div class="streak" id="streakDisplay"></div>
<div class="quote" id="quoteDisplay"></div>
</section>

<audio id="flipSound" src="https://www.soundjay.com/button/sounds/button-16.mp3"></audio>
<audio id="correctSound" src="https://www.soundjay.com/button/sounds/button-3.mp3"></audio>
<audio id="wrongSound" src="https://www.soundjay.com/button/sounds/button-10.mp3"></audio>

<script>
// --- Tutorial ---
if(!localStorage.getItem('tutorialShown')){
  document.getElementById('tutorialSection').style.display='flex';
} else { document.getElementById('tutorialSection').style.display='none'; }
function closeTutorial(){
  localStorage.setItem('tutorialShown','true');
  document.getElementById('tutorialSection').style.display='none';
}

// --- Account ---
let username = localStorage.getItem('username') || 'Gast';
document.getElementById('usernameInput').value=username;
let streakDays = JSON.parse(localStorage.getItem('streakDays')) || [];

function saveUsername(){
  username=document.getElementById('usernameInput').value.trim() || 'Gast';
  localStorage.setItem('username',username);
  updateAccountInfo();
}
function updateStreak(){
  let today = new Date().toISOString().slice(0,10);
  if(!streakDays.includes(today)){ streakDays.push(today); localStorage.setItem('streakDays',JSON.stringify(streakDays)); }
}
function updateAccountInfo(){
  updateStreak();
  let streak=streakDays.length;
  let level = Math.floor(streak/3)+1;
  document.getElementById('avatarName').innerText=username;
  document.getElementById('avatarLevel').innerText=`Level ${level}`;
  document.getElementById('avatarStreak').innerText=`Streak ${streak} Tage`;
}

// --- Ordner & Vokabeln ---
let folders = JSON.parse(localStorage.getItem('folders')) || {};
let currentFolder='';
let vocabList=[];
let currentIndex=0;
let flipped=false;

function saveFolders(){localStorage.setItem('folders',JSON.stringify(folders));}
function renderFolders(){
  const list=document.getElementById('folderList'); list.innerHTML='';
  for(let name in folders){
    let div=document.createElement('div'); div.className='vocab-item';
    div.innerHTML=`<span>${name}</span>`;
    let openBtn=document.createElement('button'); openBtn.innerText='Öffnen'; openBtn.onclick=()=>openFolder(name);
    let delBtn=document.createElement('button'); delBtn.innerText='Löschen'; delBtn.className='delete-btn'; delBtn.onclick=()=>deleteFolder(name);
    div.appendChild(openBtn); div.appendChild(delBtn); list.appendChild(div);
  }
}
function createFolder(){
  let name=document.getElementById('newFolderName').value.trim();
  if(name && !folders[name]){ folders[name]=[]; saveFolders(); renderFolders(); document.getElementById('newFolderName').value=''; }
}
function deleteFolder(name){
  if(confirm(`Ordner "${name}" löschen?`)){ delete folders[name]; saveFolders(); renderFolders();
    if(currentFolder===name){ document.getElementById('trainerSection').style.display='none'; } }
}
function openFolder(name){
  currentFolder=name; vocabList=folders[name]; currentIndex=0; flipped=false;
  document.getElementById('trainerSection').style.display='block'; document.getElementById('folderTitle').innerText=name;
  showCard(); renderVocabList(); updateProgress(); updateAccountInfo();
}
function renderVocabList(){
  const list=document.getElementById('vocabList