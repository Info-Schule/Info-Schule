<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GGLernen Vokabeltrainer</title>
<style>
body{font-family:Arial,sans-serif;background:#f0f4f8;color:#333;padding:20px;}
h1,h2{color:#2d3436;}
section{background:#74b9ff;padding:20px;margin-bottom:20px;border-radius:15px;color:#fff;}
input,button,select{padding:10px;margin:5px;border-radius:10px;border:none;font-size:1em;}
button{background:#6c5ce7;color:white;cursor:pointer;transition:0.3s;}
button:hover{background:#a29bfe;}
.card-container{perspective:1000px;margin:20px 0;}
.card{width:300px;height:180px;background:#fff;color:#000;display:flex;align-items:center;justify-content:center;border-radius:15px;text-align:center;font-size:1.3em;cursor:pointer;transition:0.6s;transform-style:preserve-3d;position:relative;}
.card.flipped{transform:rotateY(180deg);}
.card .front,.card .back{position:absolute;width:100%;height:100%;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;border-radius:15px;}
.card .back{transform:rotateY(180deg);background:#ffeaa7;}
.progress{margin-top:10px;font-size:0.9em;}
.level{margin-top:10px;font-weight:bold;}
</style>
</head>
<body>

<h1>GGLernen Vokabeltrainer</h1>

<section>
  <h2>Konto</h2>
  <input type="text" id="usernameInput" placeholder="Dein Name">
  <button onclick="saveUsername()">Speichern</button>
  <div id="accountInfo"></div>
</section>

<section>
  <h2>Ordner</h2>
  <input type="text" id="newFolderName" placeholder="Neuen Ordner erstellen">
  <button onclick="createFolder()">Erstellen</button>
  <div id="folderList"></div>
</section>

<section id="trainerSection" style="display:none;">
  <h2 id="folderTitle"></h2>
  <div class="card-container">
    <div class="card" id="card" onclick="flipCard()">
      <div class="front" id="cardFront"></div>
      <div class="back" id="cardBack"></div>
    </div>
  </div>
  <div>
    <input type="text" id="frontInput" placeholder="Französisch">
    <input type="text" id="backInput" placeholder="Deutsch">
    <button onclick="addVocab()">Hinzufügen</button>
  </div>
  <div id="vocabList"></div>
  <div>
    <button onclick="answer(true)">Richtig</button>
    <button onclick="answer(false)">Falsch</button>
  </div>
  <div class="progress" id="progress"></div>
  <div class="level" id="levelDisplay"></div>
</section>

<script>
// --- Account ---
let username = localStorage.getItem('username') || '';
document.getElementById('usernameInput').value=username;
function saveUsername(){
  username=document.getElementById('usernameInput').value.trim();
  localStorage.setItem('username',username);
  document.getElementById('accountInfo').innerText='Name: '+username;
}

// --- Ordner ---
let folders = JSON.parse(localStorage.getItem('folders')) || {};
let currentFolder='';
let vocabList=[];
let currentIndex=0;
let flipped=false;

function saveFolders(){localStorage.setItem('folders',JSON.stringify(folders));}
function renderFolders(){
  const list = document.getElementById('folderList');
  list.innerHTML='';
  for(let name in folders){
    let btn=document.createElement('button');
    btn.innerText=name;
    btn.onclick=()=>openFolder(name);
    list.appendChild(btn);
  }
}
function createFolder(){
  let name=document.getElementById('newFolderName').value.trim();
  if(name && !folders[name]){
    folders[name]=[];
    saveFolders();
    renderFolders();
    document.getElementById('newFolderName').value='';
  }
}

function openFolder(name){
  currentFolder=name;
  vocabList=folders[name];
  document.getElementById('trainerSection').style.display='block';
  document.getElementById('folderTitle').innerText=name;
  currentIndex=0;
  flipped=false;
  showCard();
  renderVocabList();
  updateProgress();
}

// --- Trainer ---
function showCard(){
  if(vocabList.length==0){
    document.getElementById('cardFront').innerText='Keine Vokabeln';
    document.getElementById('cardBack').innerText='';
    return;
  }
  document.getElementById('cardFront').innerText=vocabList[currentIndex].front;
  document.getElementById('cardBack').innerText=vocabList[currentIndex].back;
  flipped=false;
  document.getElementById('card').classList.remove('flipped');
}

function flipCard(){
  if(vocabList.length==0) return;
  flipped=!flipped;
  document.getElementById('card').classList.toggle('flipped');
}

function addVocab(){
  const front=document.getElementById('frontInput').value.trim();
  const back=document.getElementById('backInput').value.trim();
  if(front && back){
    vocabList.push({front,back,right:0,wrong:0});
    folders[currentFolder]=vocabList;
    saveFolders();
    document.getElementById('frontInput').value='';
    document.getElementById('backInput').value='';
    showCard();
    renderVocabList();
    updateProgress();
  }
}

function answer(isRight){
  if(vocabList.length==0) return;
  if(isRight) vocabList[currentIndex].right++;
  else vocabList[currentIndex].wrong++;
  folders[currentFolder]=vocabList;
  saveFolders();
  nextCard();
  renderVocabList();
  updateProgress();
}

function nextCard(){
  currentIndex++;
  if(currentIndex>=vocabList.length) currentIndex=0;
  showCard();
}

function renderVocabList(){
  const container=document.getElementById('vocabList');
  container.innerHTML='';
  vocabList.forEach(v=>{
    const div=document.createElement('div');
    let percent=Math.round((v.right/(v.right+v.wrong||1))*100);
    div.innerText=`${v.front} - ${v.back} | Erfolg: ${percent}%`;
    container.appendChild(div);
  });
}

function updateProgress(){
  if(vocabList.length==0){
    document.getElementById('progress').innerText='Fortschritt: 0%';
    document.getElementById('levelDisplay').innerText='';
    return;
  }
  let total=vocabList.length;
  let mastered=vocabList.filter(v=>v.right>v.wrong).length;
  let percent=Math.round((mastered/total)*100);
  document.getElementById('progress').innerText=`Fortschritt: ${percent}%`;
  document.getElementById('levelDisplay').innerText=`Level: ${Math.floor(percent/10)+1}`;
}

// --- Initial ---
renderFolders();
if(username) document.getElementById('accountInfo').innerText='Name: '+username;
</script>

</body>
</html>