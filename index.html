<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GGLernen Vokabeltrainer</title>
<style>
body{font-family:'Segoe UI',sans-serif;background:#74b9ff;color:#333;padding:20px;display:flex;flex-direction:column;align-items:center;}
h1,h2{color:#fff;text-shadow:1px 1px 5px rgba(0,0,0,0.3);}
section{background:rgba(255,255,255,0.1);padding:20px;margin:10px;border-radius:20px;width:90%;max-width:700px;backdrop-filter: blur(10px);box-shadow:0 8px 20px rgba(0,0,0,0.2);}
input,button,select{padding:10px;margin:5px;border-radius:10px;border:none;font-size:1em;outline:none;}
button{background:#6c5ce7;color:white;cursor:pointer;transition:0.3s;box-shadow:0 5px 15px rgba(0,0,0,0.2);}
button:hover{background:#a29bfe;transform:scale(1.05);}
.card-container{perspective:1000px;margin:20px 0;}
.card{width:300px;height:180px;background:#fff;color:#000;display:flex;align-items:center;justify-content:center;border-radius:15px;text-align:center;font-size:1.3em;cursor:pointer;transition:0.6s;transform-style:preserve-3d;position:relative;box-shadow:0 10px 30px rgba(0,0,0,0.3);}
.card.flipped{transform:rotateY(180deg) scale(1.05);}
.card .front,.card .back{position:absolute;width:100%;height:100%;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;border-radius:15px;}
.card .back{transform:rotateY(180deg);background:#ffeaa7;}
.vocab-item{transition:0.3s;}
.vocab-item:hover{transform:scale(1.02);}
.progress, .level, .streak{margin-top:10px;font-size:0.9em;color:#fff;text-shadow:1px 1px 3px rgba(0,0,0,0.3);}
.delete-btn{background:#e17055;margin-left:5px;}
</style>
</head>
<body>

<h1>GGLernen Vokabeltrainer</h1>

<section>
<h2>Konto</h2>
<input type="text" id="usernameInput" placeholder="Dein Name">
<button onclick="saveUsername()">Speichern</button>
<div id="accountInfo"></div>
</section>

<section>
<h2>Ordner</h2>
<input type="text" id="newFolderName" placeholder="Neuen Ordner erstellen">
<button onclick="createFolder()">Erstellen</button>
<div id="folderList"></div>
</section>

<section id="trainerSection" style="display:none;">
<h2 id="folderTitle"></h2>
<div class="card-container">
<div class="card" id="card" onclick="flipCard()">
<div class="front" id="cardFront"></div>
<div class="back" id="cardBack"></div>
</div>
</div>
<div>
<input type="text" id="frontInput" placeholder="Fremdsprache">
<input type="text" id="backInput" placeholder="Deutsch">
<button onclick="addVocab()">Hinzufügen</button>
</div>
<div id="vocabList"></div>
<div>
<button onclick="answer(true)">Richtig</button>
<button onclick="answer(false)">Falsch</button>
</div>
<div class="progress" id="progress"></div>
<div class="level" id="levelDisplay"></div>
<div class="streak" id="streakDisplay"></div>
</section>

<script>
// --- Konto & Streak ---
let username = localStorage.getItem('username') || '';
document.getElementById('usernameInput').value=username;
let streakDays = JSON.parse(localStorage.getItem('streakDays')) || [];

function saveUsername(){
    username=document.getElementById('usernameInput').value.trim();
    localStorage.setItem('username',username);
    updateAccountInfo();
}

function updateStreak(){
    let today = new Date().toISOString().slice(0,10);
    if(!streakDays.includes(today)){
        streakDays.push(today);
        localStorage.setItem('streakDays',JSON.stringify(streakDays));
    }
}

function updateAccountInfo(){
    updateStreak();
    let streak=streakDays.length;
    document.getElementById('accountInfo').innerHTML=`<strong>Name:</strong> ${username}<br><strong>Streak:</strong> ${streak} Tage`;
}
updateAccountInfo();

// --- Ordner & Vokabeln ---
let folders = JSON.parse(localStorage.getItem('folders')) || {};
let currentFolder='';
let vocabList=[];
let currentIndex=0;
let flipped=false;

function saveFolders(){localStorage.setItem('folders',JSON.stringify(folders));}
function renderFolders(){
    const list = document.getElementById('folderList');
    list.innerHTML='';
    for(let name in folders){
        let div=document.createElement('div');
        div.innerText=name;
        let openBtn=document.createElement('button');
        openBtn.innerText='Öffnen';
        openBtn.onclick=()=>openFolder(name);
        let delBtn=document.createElement('button');
        delBtn.innerText='Löschen';
        delBtn.className='delete-btn';
        delBtn.onclick=()=>{deleteFolder(name)};
        div.appendChild(openBtn);
        div.appendChild(delBtn);
        list.appendChild(div);
    }
}
function createFolder(){
    let name=document.getElementById('newFolderName').value.trim();
    if(name && !folders[name]){
        folders[name]=[];
        saveFolders();
        renderFolders();
        document.getElementById('newFolderName').value='';
    }
}

function deleteFolder(name){
    if(confirm(`Ordner "${name}" wirklich löschen?`)){
        delete folders[name];
        saveFolders();
        renderFolders();
        if(currentFolder===name){document.getElementById('trainerSection').style.display='none';}
    }
}

function openFolder(name){
    currentFolder=name;
    vocabList=folders[name];
    document.getElementById('trainerSection').style.display='block';
    document.getElementById('folderTitle').innerText=name;
    currentIndex=0;
    flipped=false;
    showCard();
    renderVocabList();
    updateProgress();
}

// --- Trainer ---
function showCard(){
    if(vocabList.length==0){
        document.getElementById('cardFront').innerText='Keine Vokabeln';
        document.getElementById('cardBack').innerText='';
        return;
    }
    document.getElementById('cardFront').innerText=vocabList[currentIndex].front;
    document.getElementById('cardBack').innerText=vocabList[currentIndex].back;
    document.getElementById('card').classList.remove('flipped');
    flipped=false;
}

function flipCard(){
    if(vocabList.length==0) return;
    flipped=!flipped;
    document.getElementById('card').classList.toggle('flipped');
}

function addVocab(){
    let front=document.getElementById('frontInput').value.trim();
    let back=document.getElementById('backInput').value.trim();
    if(front && back){
        vocabList.push({front, back, correct:0});
        folders[currentFolder]=vocabList;
        saveFolders();
        renderVocabList();
        document.getElementById('frontInput').value='';
        document.getElementById('backInput').value='';
        currentIndex=vocabList.length-1;
        showCard();
    }
}

function renderVocabList(){
    const list = document.getElementById('vocabList');
    list.innerHTML='';
    vocabList.forEach((v,i)=>{
        let div=document.createElement('div');
        div.className='vocab-item';
        div.innerText=`${v.front} → ${v.back} [Erfolgreich: ${v.correct}]`;
        list.appendChild(div);
    });
}

function answer(isCorrect){
    if(vocabList.length==0) return;
    if(isCorrect) vocabList[currentIndex].correct++;
    else vocabList[currentIndex].correct=Math.max(0,vocabList[currentIndex].correct-1);
    folders[currentFolder]=v